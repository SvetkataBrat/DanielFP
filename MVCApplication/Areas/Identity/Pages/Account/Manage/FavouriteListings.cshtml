@page
@model MVCApplication.Areas.Identity.Pages.Account.Manage.FavouriteListingsModel
<div class="d-flex gap-1">
@{
	for (int i = 0; i < Model.FavouriteListings.Count; i++)
	{
		<div class="listing-item offer-con">
					<form asp-controller="Listings" asp-action="UnFavouriteItem" method="post" style="display: inline;">
			<input type="hidden" name="listingId" value="@Model.FavouriteListings[i].Id" />
			<button type="submit" class="unfav" style="background: none; border: none; padding: 0;">
				<img src="~/star_normal.png" class="fav-images" />
			</button>
		</form>

			
			<a asp-action="Details" asp-controller="Listings" asp-route-id="@Model.FavouriteListings[i].Id">
			
				<div class="listing-item-img">
					@{
						var base64_ = Convert.ToBase64String(Model.FavouriteListings[i].Car.Images[0].Data);
						var Image_ = String.Format("data:image/gif;base64,{0}", base64_);
						<img src="@Image_" />
					}
				</div>
				<div class="listing-item-name">
					<p>@Model.FavouriteListings[i].Name</p>
				</div>
				<div class="listing-item-model">
					<p>@Model.FavouriteListings[i].Car.Make @Model.FavouriteListings[i].Car.Model</p>
				</div>
			</a>
		</div>
	}
}
</div>

<style>
	.unfav {
		position: absolute;
		top: 2px;
		left: 2px;
		width: 40px;
		height: 40px;
		z-index: 1;
		opacity: 0;
	}

	.unfav > img{
		transform: scale(0.95);
	}

	.offer-con{
		position: relative;
		z-index: 0;
	}
	.offer-con > *{
		text-decoration: none !important;
		color: black !important;
	}

	.offer-con:hover .unfav{
		opacity: 1;
	}
</style>
<script>
	document.addEventListener('DOMContentLoaded', () => {
		var allImages = document.querySelectorAll('.fav-images');
		allImages.forEach(x => {
			x.addEventListener('mouseover', function() {
				x.src = "/star_normal.png";
			});
			x.addEventListener('mouseout', function() {
				x.src = "/star_hover.png";
			});
			console.log("mazna");
		})
	});
</script>